{"timestamp": "2026-02-09T06:32:43.824320Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "hi"}
{"timestamp": "2026-02-09T06:32:43.834005Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-09T06:32:43.863962Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-09T06:32:43.886383Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-09T06:32:43.909835Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "hi", "query_word_count": 1}
{"timestamp": "2026-02-09T06:32:43.939826Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-09T06:32:49.528246Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.090476, 0.04044, 0.023906, 0.058948, -0.022882, -0.04722, 0.045048, 0.015786]}
{"timestamp": "2026-02-09T06:32:49.540209Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-09T06:32:49.566451Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-09T06:32:49.579237Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 23, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nhi"}
{"timestamp": "2026-02-09T06:32:49.595120Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 76}
{"timestamp": "2026-02-09T06:32:49.611179Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from env/settings (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-09T06:32:49.643554Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 23]}"}
{"timestamp": "2026-02-09T06:32:50.695875Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7F79QTBxa176dvrLE0NGd6b37O1H\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770618767,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! How can I assist you with your medical questions today?\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 27,\n    \"completion_tokens\": 13,\n    \"total_tokens\": 40,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-09T06:32:50.708952Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7F79QTBxa176dvrLE0NGd6b37O1H\", \"object\": \"chat.completion\", \"created\": 1770618767, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you with your medical questions today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 13, \"total_tokens\": 40, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T06:32:50.738374Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "Hello! How can I assist you with your medical questions today?", "full_answer": "Hello! How can I assist you with your medical questions today?", "answer_len": 62, "prompt_tokens": 27, "completion_tokens": 13, "total_tokens": 40, "raw_response": "{\"id\": \"chatcmpl-D7F79QTBxa176dvrLE0NGd6b37O1H\", \"object\": \"chat.completion\", \"created\": 1770618767, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you with your medical questions today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 13, \"total_tokens\": 40, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T06:32:50.775833Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "8c3bf9d7-724d-43f6-9e4a-1cf17449e188"}
{"timestamp": "2026-02-09T07:50:04.154811Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "hi"}
{"timestamp": "2026-02-09T07:50:04.183241Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-09T07:50:04.205960Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-09T07:50:04.230344Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-09T07:50:04.243974Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "hi", "query_word_count": 1}
{"timestamp": "2026-02-09T07:50:04.261228Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-09T07:50:09.327457Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.090476, 0.04044, 0.023906, 0.058948, -0.022882, -0.04722, 0.045048, 0.015786]}
{"timestamp": "2026-02-09T07:50:09.336231Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-09T07:50:09.389429Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-09T07:50:09.392424Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 23, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nhi"}
{"timestamp": "2026-02-09T07:50:09.410195Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 76}
{"timestamp": "2026-02-09T07:50:09.434104Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from env/settings (masked)", "key_set": false, "key_length": 0, "masked_key": "(empty or not set)"}
{"timestamp": "2026-02-09T07:51:26.129834Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "hi"}
{"timestamp": "2026-02-09T07:51:26.139680Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-09T07:51:26.161845Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-09T07:51:26.183466Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-09T07:51:26.201415Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "hi", "query_word_count": 1}
{"timestamp": "2026-02-09T07:51:26.220168Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-09T07:51:31.514723Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.090476, 0.04044, 0.023906, 0.058948, -0.022882, -0.04722, 0.045048, 0.015786]}
{"timestamp": "2026-02-09T07:51:31.520817Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-09T07:51:31.617773Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-09T07:51:31.621847Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 23, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nhi"}
{"timestamp": "2026-02-09T07:51:31.642781Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 76}
{"timestamp": "2026-02-09T07:51:31.663167Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from env/settings (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-09T07:51:31.700608Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 23]}"}
{"timestamp": "2026-02-09T07:51:33.152972Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7GLK7FkS4iiGbDY2KLcJ1dNNoWQr\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770623490,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! How can I assist you with your medical questions today?\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 27,\n    \"completion_tokens\": 13,\n    \"total_tokens\": 40,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-09T07:51:33.159936Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7GLK7FkS4iiGbDY2KLcJ1dNNoWQr\", \"object\": \"chat.completion\", \"created\": 1770623490, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you with your medical questions today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 13, \"total_tokens\": 40, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T07:51:33.184330Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "Hello! How can I assist you with your medical questions today?", "full_answer": "Hello! How can I assist you with your medical questions today?", "answer_len": 62, "prompt_tokens": 27, "completion_tokens": 13, "total_tokens": 40, "raw_response": "{\"id\": \"chatcmpl-D7GLK7FkS4iiGbDY2KLcJ1dNNoWQr\", \"object\": \"chat.completion\", \"created\": 1770623490, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you with your medical questions today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 13, \"total_tokens\": 40, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T07:51:33.241407Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "6fef8c04-1e61-4bc5-a0a3-80f4ca970025"}
{"timestamp": "2026-02-09T08:00:38.652730Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "hi"}
{"timestamp": "2026-02-09T08:00:38.665597Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-09T08:00:38.687955Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-09T08:00:38.713203Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-09T08:00:38.733209Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "hi", "query_word_count": 1}
{"timestamp": "2026-02-09T08:00:38.760439Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-09T08:01:02.032965Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.090476, 0.04044, 0.023906, 0.058948, -0.022882, -0.04722, 0.045048, 0.015786]}
{"timestamp": "2026-02-09T08:01:02.041164Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-09T08:01:02.146509Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-09T08:01:02.153134Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 23, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nhi"}
{"timestamp": "2026-02-09T08:01:02.186493Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 76}
{"timestamp": "2026-02-09T08:01:02.221327Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from env/settings (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-09T08:01:02.280792Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 23]}"}
{"timestamp": "2026-02-09T08:01:03.449794Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7GUWVlGPDzjLDWAD1kJ8G4AroJMh\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770624060,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! How can I assist you today?\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 27,\n    \"completion_tokens\": 9,\n    \"total_tokens\": 36,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-09T08:01:03.458650Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7GUWVlGPDzjLDWAD1kJ8G4AroJMh\", \"object\": \"chat.completion\", \"created\": 1770624060, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 9, \"total_tokens\": 36, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T08:01:03.482827Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "Hello! How can I assist you today?", "full_answer": "Hello! How can I assist you today?", "answer_len": 34, "prompt_tokens": 27, "completion_tokens": 9, "total_tokens": 36, "raw_response": "{\"id\": \"chatcmpl-D7GUWVlGPDzjLDWAD1kJ8G4AroJMh\", \"object\": \"chat.completion\", \"created\": 1770624060, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 9, \"total_tokens\": 36, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T08:01:03.518110Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "3b397569-3e97-4201-b793-56ac471d9913"}
{"timestamp": "2026-02-09T08:13:25.170818Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "hi"}
{"timestamp": "2026-02-09T08:13:25.188102Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-09T08:13:25.223981Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-09T08:13:25.252761Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-09T08:13:25.270992Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "hi", "query_word_count": 1}
{"timestamp": "2026-02-09T08:13:25.299350Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-09T08:13:47.557762Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.090476, 0.04044, 0.023906, 0.058948, -0.022882, -0.04722, 0.045048, 0.015786]}
{"timestamp": "2026-02-09T08:13:47.563261Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-09T08:13:47.692574Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-09T08:13:47.702142Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 23, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nhi"}
{"timestamp": "2026-02-09T08:13:47.742544Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 76}
{"timestamp": "2026-02-09T08:13:47.768107Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from env/settings (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-09T08:13:47.803914Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 23]}"}
{"timestamp": "2026-02-09T08:13:49.476040Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7GgsXdcLZFjEN147Bvax1SZF2s4c\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770624826,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! How can I assist you today?\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 27,\n    \"completion_tokens\": 9,\n    \"total_tokens\": 36,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-09T08:13:49.484866Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7GgsXdcLZFjEN147Bvax1SZF2s4c\", \"object\": \"chat.completion\", \"created\": 1770624826, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 9, \"total_tokens\": 36, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T08:13:49.522593Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "Hello! How can I assist you today?", "full_answer": "Hello! How can I assist you today?", "answer_len": 34, "prompt_tokens": 27, "completion_tokens": 9, "total_tokens": 36, "raw_response": "{\"id\": \"chatcmpl-D7GgsXdcLZFjEN147Bvax1SZF2s4c\", \"object\": \"chat.completion\", \"created\": 1770624826, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 9, \"total_tokens\": 36, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T08:13:49.593162Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "a8d57a0f-2d08-4b9b-8382-6d9b6856a980"}
{"timestamp": "2026-02-09T08:27:08.039507Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "hi"}
{"timestamp": "2026-02-09T08:27:08.093907Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-09T08:27:08.128018Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-09T08:27:08.174716Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-09T08:27:08.205138Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "hi", "query_word_count": 1}
{"timestamp": "2026-02-09T08:27:08.242474Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-09T08:27:13.321785Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.090476, 0.04044, 0.023906, 0.058948, -0.022882, -0.04722, 0.045048, 0.015786]}
{"timestamp": "2026-02-09T08:27:13.326544Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-09T08:27:13.395882Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-09T08:27:13.399604Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 23, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nhi"}
{"timestamp": "2026-02-09T08:27:13.430629Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 76}
{"timestamp": "2026-02-09T08:27:13.456576Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from env/settings (masked)", "key_set": true, "key_length": 168, "masked_key": "sk-proj...kA11"}
{"timestamp": "2026-02-09T08:27:13.505355Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 23]}"}
{"timestamp": "2026-02-09T08:27:13.971308Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 401, "response_body": "{\n  \"error\": {\n    \"message\": \"Incorrect API key provided: sk-proj-************************************************************************************************************************************************************kA11. You can find your API key at https://platform.openai.com/account/api-keys.\",\n    \"type\": \"invalid_request_error\",\n    \"code\": \"invalid_api_key\",\n    \"param\": null\n  },\n  \"status\": 401\n}"}
{"timestamp": "2026-02-09T12:01:57.660361Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "what is the human blood level?"}
{"timestamp": "2026-02-09T12:01:57.673834Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-09T12:01:57.705977Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-09T12:01:57.730360Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-09T12:01:57.742953Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "what is the human blood level?", "query_word_count": 6}
{"timestamp": "2026-02-09T12:01:57.778527Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-09T12:02:24.836792Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [0.019853, 0.040131, -0.077891, -0.016211, -0.106606, -0.043653, 0.010984, 0.083425]}
{"timestamp": "2026-02-09T12:02:24.840727Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-09T12:02:24.965706Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-09T12:02:24.969165Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 51, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nwhat is the human blood level?"}
{"timestamp": "2026-02-09T12:02:24.988922Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 104}
{"timestamp": "2026-02-09T12:02:25.009967Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-09T12:02:25.042853Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 51]}"}
{"timestamp": "2026-02-09T12:02:27.851698Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7KG7MY0DGXTGISOFWGtoRMpJwQGc\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770638543,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"The normal human blood level (hemoglobin concentration) typically ranges from:\\n- Men: 13.8 to 17.2 grams per deciliter (g/dL)\\n- Women: 12.1 to 15.1 g/dL\\n\\nIf you meant blood volume, the average adult has about 4.5 to 5.5 liters of blood.  \\nPlease specify if you need a different blood parameter.\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 33,\n    \"completion_tokens\": 87,\n    \"total_tokens\": 120,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-09T12:02:27.858345Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7KG7MY0DGXTGISOFWGtoRMpJwQGc\", \"object\": \"chat.completion\", \"created\": 1770638543, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The normal human blood level (hemoglobin concentration) typically ranges from:\\n- Men: 13.8 to 17.2 grams per deciliter (g/dL)\\n- Women: 12.1 to 15.1 g/dL\\n\\nIf you meant blood volume, the average adult has about 4.5 to 5.5 liters of blood.  \\nPlease specify if you need a different blood parameter.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 33, \"completion_tokens\": 87, \"total_tokens\": 120, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T12:02:27.909468Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "The normal human blood level (hemoglobin concentration) typically ranges from:\n- Men: 13.8 to 17.2 grams per deciliter (g/dL)\n- Women: 12.1 to 15.1 g/dL\n\nIf you meant blood volume, the average adult has about 4.5 to 5.5 liters of blood.  \nPlease specify if you need a different blood parameter.", "full_answer": "The normal human blood level (hemoglobin concentration) typically ranges from:\n- Men: 13.8 to 17.2 grams per deciliter (g/dL)\n- Women: 12.1 to 15.1 g/dL\n\nIf you meant blood volume, the average adult has about 4.5 to 5.5 liters of blood.  \nPlease specify if you need a different blood parameter.", "answer_len": 294, "prompt_tokens": 33, "completion_tokens": 87, "total_tokens": 120, "raw_response": "{\"id\": \"chatcmpl-D7KG7MY0DGXTGISOFWGtoRMpJwQGc\", \"object\": \"chat.completion\", \"created\": 1770638543, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The normal human blood level (hemoglobin concentration) typically ranges from:\\n- Men: 13.8 to 17.2 grams per deciliter (g/dL)\\n- Women: 12.1 to 15.1 g/dL\\n\\nIf you meant blood volume, the average adult has about 4.5 to 5.5 liters of blood.  \\nPlease specify if you need a different blood parameter.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 33, \"completion_tokens\": 87, \"total_tokens\": 120, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T12:02:27.999422Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "82e9bc27-b191-4516-b16b-6048867b1ae6"}
{"timestamp": "2026-02-09T12:13:47.099310Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "hi"}
{"timestamp": "2026-02-09T12:13:47.112240Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-09T12:13:47.141696Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-09T12:13:47.170598Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-09T12:13:47.189248Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "hi", "query_word_count": 1}
{"timestamp": "2026-02-09T12:13:47.225510Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-09T12:13:52.766511Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.090476, 0.04044, 0.023906, 0.058948, -0.022882, -0.04722, 0.045048, 0.015786]}
{"timestamp": "2026-02-09T12:13:52.772001Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-09T12:13:52.864755Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-09T12:13:52.870409Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 23, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nhi"}
{"timestamp": "2026-02-09T12:13:52.901622Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 76}
{"timestamp": "2026-02-09T12:13:52.934811Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-09T12:13:52.994021Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 23]}"}
{"timestamp": "2026-02-09T12:13:54.443786Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7KRDTprL6Uw8VS4gtQMJPSK8zHzs\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770639231,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! How can I assist you with your medical questions today?\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 27,\n    \"completion_tokens\": 13,\n    \"total_tokens\": 40,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-09T12:13:54.450468Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7KRDTprL6Uw8VS4gtQMJPSK8zHzs\", \"object\": \"chat.completion\", \"created\": 1770639231, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you with your medical questions today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 13, \"total_tokens\": 40, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T12:13:54.476768Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "Hello! How can I assist you with your medical questions today?", "full_answer": "Hello! How can I assist you with your medical questions today?", "answer_len": 62, "prompt_tokens": 27, "completion_tokens": 13, "total_tokens": 40, "raw_response": "{\"id\": \"chatcmpl-D7KRDTprL6Uw8VS4gtQMJPSK8zHzs\", \"object\": \"chat.completion\", \"created\": 1770639231, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you with your medical questions today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 13, \"total_tokens\": 40, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T12:13:54.525992Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "01fd9fbe-85ff-4386-8ce4-17e418eb3829"}
{"timestamp": "2026-02-09T12:17:57.887217Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "hi"}
{"timestamp": "2026-02-09T12:17:57.898527Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-09T12:17:57.925070Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-09T12:17:57.957071Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-09T12:17:57.976757Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "hi", "query_word_count": 1}
{"timestamp": "2026-02-09T12:17:58.009653Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-09T12:18:03.090257Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.090476, 0.04044, 0.023906, 0.058948, -0.022882, -0.04722, 0.045048, 0.015786]}
{"timestamp": "2026-02-09T12:18:03.104325Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-09T12:18:03.158851Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-09T12:18:03.162418Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 23, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nhi"}
{"timestamp": "2026-02-09T12:18:03.184816Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 76}
{"timestamp": "2026-02-09T12:18:03.207322Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-09T12:18:03.242273Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 23]}"}
{"timestamp": "2026-02-09T12:18:04.615527Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7KVFm2c1tHvAw1a9y9z28Eh7NLX1\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770639481,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! How can I assist you today?\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 27,\n    \"completion_tokens\": 9,\n    \"total_tokens\": 36,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-09T12:18:04.627374Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7KVFm2c1tHvAw1a9y9z28Eh7NLX1\", \"object\": \"chat.completion\", \"created\": 1770639481, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 9, \"total_tokens\": 36, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T12:18:04.654972Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "Hello! How can I assist you today?", "full_answer": "Hello! How can I assist you today?", "answer_len": 34, "prompt_tokens": 27, "completion_tokens": 9, "total_tokens": 36, "raw_response": "{\"id\": \"chatcmpl-D7KVFm2c1tHvAw1a9y9z28Eh7NLX1\", \"object\": \"chat.completion\", \"created\": 1770639481, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 9, \"total_tokens\": 36, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-09T12:18:04.704400Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "6918c963-4e57-49db-bd8b-ebc6b1087e12"}
{"timestamp": "2026-02-10T07:20:17.957165Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "what is computer scinece?"}
{"timestamp": "2026-02-10T07:20:17.992073Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-10T07:20:18.007580Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-10T07:20:18.038667Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-10T07:20:18.075531Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "what is computer scinece?", "query_word_count": 4}
{"timestamp": "2026-02-10T07:20:18.112828Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-10T07:20:26.298445Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.057353, 0.019772, -0.04795, -0.009377, -0.010196, -0.091016, 0.021592, 0.077915]}
{"timestamp": "2026-02-10T07:20:26.302662Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-10T07:20:26.339689Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 2 chunks", "chunk_count": 2, "chunk_ids": ["f7266782-7054-4ff3-8493-c9dfb81db4f0", "4801fdf5-50ec-4b0a-a412-de02d7b0a65b"], "chunks_matched": [{"chunk_id": "f7266782-7054-4ff3-8493-c9dfb81db4f0", "filename": "smplex_4162.pdf", "page": 1, "distance": 0.6755172803689664}, {"chunk_id": "4801fdf5-50ec-4b0a-a412-de02d7b0a65b", "filename": "smplex_4162.pdf", "page": 1, "distance": 0.7831478844196862}]}
{"timestamp": "2026-02-10T07:20:26.364069Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 942, "user_content_len": 988, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\ntool implementation effort. (C): To guarantee quick results. (D): To know what to measure in tool usage. (E): To show how use the tool. (Correct): A,B,D (Question 2): What is testware? (A): Software for testing (B): Test cases only (C): The test environment (D): Anything used in testing (Correct): D.\n\n Global Association for Quality Management (GAQM) Exam Name  Certified Software Automation Tester Foundation Level (CSATFL) Exam Code  CSATFL-001 Sample Exam (Question 1): Why is it good to have a test process in place before you acquire a tool? (Choose three) (A): To help know which tests can be automated. (B): To prevent a chaotic tool implementation effort. (C): To guarantee quick results. (D): To know what to measure in tool usage. (E): To show how use the tool. (Correct): A,B..."}
{"timestamp": "2026-02-10T07:20:26.395223Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 1041}
{"timestamp": "2026-02-10T07:20:26.419798Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-10T07:20:26.479845Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 988]}"}
{"timestamp": "2026-02-10T07:20:28.759242Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7cKl8vljCQp4adjvR5x6NVHXdGQm\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770708023,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Computer science is the study of computers and computational systems, including their theory, design, development, and application. It covers topics such as algorithms, programming, software engineering, data structures, artificial intelligence, and computer hardware.\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 273,\n    \"completion_tokens\": 44,\n    \"total_tokens\": 317,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-10T07:20:28.766396Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7cKl8vljCQp4adjvR5x6NVHXdGQm\", \"object\": \"chat.completion\", \"created\": 1770708023, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Computer science is the study of computers and computational systems, including their theory, design, development, and application. It covers topics such as algorithms, programming, software engineering, data structures, artificial intelligence, and computer hardware.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 273, \"completion_tokens\": 44, \"total_tokens\": 317, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-10T07:20:28.796052Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "Computer science is the study of computers and computational systems, including their theory, design, development, and application. It covers topics such as algorithms, programming, software engineering, data structures, artificial intelligence, and computer hardware.", "full_answer": "Computer science is the study of computers and computational systems, including their theory, design, development, and application. It covers topics such as algorithms, programming, software engineering, data structures, artificial intelligence, and computer hardware.", "answer_len": 268, "prompt_tokens": 273, "completion_tokens": 44, "total_tokens": 317, "raw_response": "{\"id\": \"chatcmpl-D7cKl8vljCQp4adjvR5x6NVHXdGQm\", \"object\": \"chat.completion\", \"created\": 1770708023, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Computer science is the study of computers and computational systems, including their theory, design, development, and application. It covers topics such as algorithms, programming, software engineering, data structures, artificial intelligence, and computer hardware.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 273, \"completion_tokens\": 44, \"total_tokens\": 317, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-10T07:20:28.840033Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "06c7ac8b-3018-4328-a8e9-8df49e3fedad"}
{"timestamp": "2026-02-10T11:28:57.144745Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "what is blood level in human body?"}
{"timestamp": "2026-02-10T11:28:57.304658Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-10T11:28:57.320877Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-10T11:28:57.346123Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-10T11:28:57.366126Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "what is blood level in human body?", "query_word_count": 7}
{"timestamp": "2026-02-10T11:28:57.389344Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-10T11:29:03.203525Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [0.017901, 0.03267, -0.069037, -0.008473, -0.103971, -0.059081, 0.015348, 0.087105]}
{"timestamp": "2026-02-10T11:29:03.207795Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-10T11:29:03.276491Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-10T11:29:03.280204Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 55, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nwhat is blood level in human body?"}
{"timestamp": "2026-02-10T11:29:03.310524Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 108}
{"timestamp": "2026-02-10T11:29:03.328264Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-10T11:29:03.372154Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 55]}"}
{"timestamp": "2026-02-10T11:29:04.956118Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7gDMOln3ZozXeVht7hkwR8CO7HKc\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770722940,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"The average blood volume in the human body is about 7-8% of body weight, roughly 4.5 to 5.5 liters in an adult.\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 34,\n    \"completion_tokens\": 34,\n    \"total_tokens\": 68,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-10T11:29:04.969297Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7gDMOln3ZozXeVht7hkwR8CO7HKc\", \"object\": \"chat.completion\", \"created\": 1770722940, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The average blood volume in the human body is about 7-8% of body weight, roughly 4.5 to 5.5 liters in an adult.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 34, \"completion_tokens\": 34, \"total_tokens\": 68, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-10T11:29:04.998614Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "The average blood volume in the human body is about 7-8% of body weight, roughly 4.5 to 5.5 liters in an adult.", "full_answer": "The average blood volume in the human body is about 7-8% of body weight, roughly 4.5 to 5.5 liters in an adult.", "answer_len": 111, "prompt_tokens": 34, "completion_tokens": 34, "total_tokens": 68, "raw_response": "{\"id\": \"chatcmpl-D7gDMOln3ZozXeVht7hkwR8CO7HKc\", \"object\": \"chat.completion\", \"created\": 1770722940, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"The average blood volume in the human body is about 7-8% of body weight, roughly 4.5 to 5.5 liters in an adult.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 34, \"completion_tokens\": 34, \"total_tokens\": 68, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-10T11:29:05.066559Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "bd77d22f-6231-49de-8d2e-7a401b9d144f"}
{"timestamp": "2026-02-11T07:18:22.587182Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "hi"}
{"timestamp": "2026-02-11T07:18:22.837572Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-11T07:18:22.850710Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-11T07:18:22.875006Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-11T07:18:22.900945Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "hi", "query_word_count": 1}
{"timestamp": "2026-02-11T07:18:22.926209Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-11T07:18:30.636699Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.090476, 0.04044, 0.023906, 0.058948, -0.022882, -0.04722, 0.045048, 0.015786]}
{"timestamp": "2026-02-11T07:18:30.640551Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-11T07:18:30.708878Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-11T07:18:30.712716Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 23, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nhi"}
{"timestamp": "2026-02-11T07:18:30.739223Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 76}
{"timestamp": "2026-02-11T07:18:30.763172Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-11T07:18:30.827330Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 23]}"}
{"timestamp": "2026-02-11T07:18:32.392564Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7ymQA6f0taWnLEvuNKKjfSUC7XYt\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770794306,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! How can I assist you today?\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 27,\n    \"completion_tokens\": 9,\n    \"total_tokens\": 36,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-11T07:18:32.400403Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7ymQA6f0taWnLEvuNKKjfSUC7XYt\", \"object\": \"chat.completion\", \"created\": 1770794306, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 9, \"total_tokens\": 36, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-11T07:18:32.475155Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "Hello! How can I assist you today?", "full_answer": "Hello! How can I assist you today?", "answer_len": 34, "prompt_tokens": 27, "completion_tokens": 9, "total_tokens": 36, "raw_response": "{\"id\": \"chatcmpl-D7ymQA6f0taWnLEvuNKKjfSUC7XYt\", \"object\": \"chat.completion\", \"created\": 1770794306, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Hello! How can I assist you today?\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 27, \"completion_tokens\": 9, \"total_tokens\": 36, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-11T07:18:32.569970Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "7dbb0932-4a7d-47f9-9f8d-d91036269e56"}
{"timestamp": "2026-02-11T07:18:51.250545Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "which type of bot you are?"}
{"timestamp": "2026-02-11T07:18:51.264612Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-11T07:18:51.291885Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-11T07:18:51.317319Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-11T07:18:51.341974Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "which type of bot you are?", "query_word_count": 6}
{"timestamp": "2026-02-11T07:18:51.368417Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-11T07:19:01.625424Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.06039, -0.0371, 0.020539, 0.069797, 0.031886, -0.049449, 0.072934, 0.046814]}
{"timestamp": "2026-02-11T07:19:01.630602Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-11T07:19:01.660468Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-11T07:19:01.682783Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 47, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nwhich type of bot you are?"}
{"timestamp": "2026-02-11T07:19:01.716435Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 100}
{"timestamp": "2026-02-11T07:19:01.743922Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-11T07:19:01.786064Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 47]}"}
{"timestamp": "2026-02-11T07:19:03.311698Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7ymvlNzRGdAWz3w4aNlxRHeDBEck\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770794337,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I am an AI medical assistant designed to provide concise and accurate health-related information.\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 33,\n    \"completion_tokens\": 16,\n    \"total_tokens\": 49,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-11T07:19:03.325672Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7ymvlNzRGdAWz3w4aNlxRHeDBEck\", \"object\": \"chat.completion\", \"created\": 1770794337, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"I am an AI medical assistant designed to provide concise and accurate health-related information.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 33, \"completion_tokens\": 16, \"total_tokens\": 49, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-11T07:19:03.358855Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "I am an AI medical assistant designed to provide concise and accurate health-related information.", "full_answer": "I am an AI medical assistant designed to provide concise and accurate health-related information.", "answer_len": 97, "prompt_tokens": 33, "completion_tokens": 16, "total_tokens": 49, "raw_response": "{\"id\": \"chatcmpl-D7ymvlNzRGdAWz3w4aNlxRHeDBEck\", \"object\": \"chat.completion\", \"created\": 1770794337, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"I am an AI medical assistant designed to provide concise and accurate health-related information.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 33, \"completion_tokens\": 16, \"total_tokens\": 49, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-11T07:19:03.393660Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "fc265fc4-0bcf-4c60-87f9-fefcaaaed5fd"}
{"timestamp": "2026-02-11T07:19:33.834055Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "what type of medical questions you are handling on it?"}
{"timestamp": "2026-02-11T07:19:33.842402Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-11T07:19:33.867495Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-11T07:19:33.891421Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-11T07:19:33.919814Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "what type of medical questions you are handling on it?", "query_word_count": 10}
{"timestamp": "2026-02-11T07:19:33.941667Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-11T07:19:39.313250Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [0.043991, 0.067638, 0.010992, -2.7e-05, -0.020603, -0.034479, 0.079994, 0.106498]}
{"timestamp": "2026-02-11T07:19:39.318647Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-11T07:19:39.345199Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 1 chunks", "chunk_count": 1, "chunk_ids": ["4801fdf5-50ec-4b0a-a412-de02d7b0a65b"], "chunks_matched": [{"chunk_id": "4801fdf5-50ec-4b0a-a412-de02d7b0a65b", "filename": "smplex_4162.pdf", "page": 1, "distance": 0.7984201401001256}]}
{"timestamp": "2026-02-11T07:19:39.358322Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 639, "user_content_len": 714, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n Global Association for Quality Management (GAQM) Exam Name  Certified Software Automation Tester Foundation Level (CSATFL) Exam Code  CSATFL-001 Sample Exam (Question 1): Why is it good to have a test process in place before you acquire a tool? (Choose three) (A): To help know which tests can be automated. (B): To prevent a chaotic tool implementation effort. (C): To guarantee quick results. (D): To know what to measure in tool usage. (E): To show how use the tool. (Correct): A,B,D (Question 2): What is testware? (A): Software for testing (B): Test cases only (C): The test environment (D): Anything used in testing (Correct): D.\n\nQUESTION:\nwhat type of medical questions you are handling on it?"}
{"timestamp": "2026-02-11T07:19:39.377423Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 767}
{"timestamp": "2026-02-11T07:19:39.396285Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-11T07:19:39.442844Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 714]}"}
{"timestamp": "2026-02-11T07:19:40.977917Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7ynX3ULCeaOef8Pl0dwzL3LBvzlY\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770794375,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I handle medical questions related to general health, symptoms, medications, medical conditions, treatments, and basic medical advice. I do not provide diagnoses or personalized medical care.\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 197,\n    \"completion_tokens\": 33,\n    \"total_tokens\": 230,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_9368cdd429\"\n}\n"}
{"timestamp": "2026-02-11T07:19:40.991547Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7ynX3ULCeaOef8Pl0dwzL3LBvzlY\", \"object\": \"chat.completion\", \"created\": 1770794375, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"I handle medical questions related to general health, symptoms, medications, medical conditions, treatments, and basic medical advice. I do not provide diagnoses or personalized medical care.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 197, \"completion_tokens\": 33, \"total_tokens\": 230, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_9368cdd429\"}"}
{"timestamp": "2026-02-11T07:19:41.013239Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "I handle medical questions related to general health, symptoms, medications, medical conditions, treatments, and basic medical advice. I do not provide diagnoses or personalized medical care.", "full_answer": "I handle medical questions related to general health, symptoms, medications, medical conditions, treatments, and basic medical advice. I do not provide diagnoses or personalized medical care.", "answer_len": 191, "prompt_tokens": 197, "completion_tokens": 33, "total_tokens": 230, "raw_response": "{\"id\": \"chatcmpl-D7ynX3ULCeaOef8Pl0dwzL3LBvzlY\", \"object\": \"chat.completion\", \"created\": 1770794375, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"I handle medical questions related to general health, symptoms, medications, medical conditions, treatments, and basic medical advice. I do not provide diagnoses or personalized medical care.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 197, \"completion_tokens\": 33, \"total_tokens\": 230, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_9368cdd429\"}"}
{"timestamp": "2026-02-11T07:19:41.047550Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "6d0765c3-da64-4646-a441-ac6771da1dd9"}
{"timestamp": "2026-02-11T07:21:22.006822Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "do you provide me other general topics answers like science and information technology?"}
{"timestamp": "2026-02-11T07:21:22.018156Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-11T07:21:22.051938Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-11T07:21:22.077986Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-11T07:21:22.103967Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "do you provide me other general topics answers like science and information technology?", "query_word_count": 13}
{"timestamp": "2026-02-11T07:21:22.137440Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-11T07:21:27.752281Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.002983, -0.005434, 0.039829, -0.017094, 0.086032, -0.017199, 0.050148, 0.078237]}
{"timestamp": "2026-02-11T07:21:27.849544Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-11T07:21:27.907987Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 3 chunks", "chunk_count": 3, "chunk_ids": ["5db8c88f-8f96-4b45-b167-134ebc6b7e4c", "c173fff8-93af-4fdd-b0d6-7adfbad08a76", "f7266782-7054-4ff3-8493-c9dfb81db4f0"], "chunks_matched": [{"chunk_id": "5db8c88f-8f96-4b45-b167-134ebc6b7e4c", "filename": "smplex_4162.pdf", "page": 2, "distance": 0.7794049347156349}, {"chunk_id": "c173fff8-93af-4fdd-b0d6-7adfbad08a76", "filename": "smplex_4162.pdf", "page": 2, "distance": 0.7923714915071125}, {"chunk_id": "f7266782-7054-4ff3-8493-c9dfb81db4f0", "filename": "smplex_4162.pdf", "page": 1, "distance": 0.7935045458668997}]}
{"timestamp": "2026-02-11T07:21:27.925459Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 1730, "user_content_len": 1838, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\nof reusable components called services? (A): Software Testing Architectural Framework (STAF) (B): Software Testing Automation Framework (STAF) (C): Software Testing Agility Framework (STAF) (D): Software Testing Accelerated Framework (STAF) (Correct): B (Question 6): True or False: You need to keep management informed of progress. (A): True (B): False (Correct): A\n\n Global Association for Quality Management (GAQM) (Question 3): Which challenge has to do with controlling testware? (A): Challenge #6, the lack of tool ownership and acceptance (B): Challenge #5, the lack of tool training (C): Challenge #8, the lack of configuration management (D): Challenge #3, lack of management support (Correct): C (Question 4): Which framework is a set of assumptions, concepts and practices that p..."}
{"timestamp": "2026-02-11T07:21:27.954527Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 1891}
{"timestamp": "2026-02-11T07:21:27.986390Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-11T07:21:28.048359Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 1838]}"}
{"timestamp": "2026-02-11T07:21:29.755692Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7ypHAoyrCjMPZ7WA1zeCH1AmQ8Eo\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770794483,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Yes, I can provide concise answers on general topics including science and information technology. Please ask your specific questions.\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 443,\n    \"completion_tokens\": 22,\n    \"total_tokens\": 465,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-11T07:21:29.770708Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7ypHAoyrCjMPZ7WA1zeCH1AmQ8Eo\", \"object\": \"chat.completion\", \"created\": 1770794483, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Yes, I can provide concise answers on general topics including science and information technology. Please ask your specific questions.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 443, \"completion_tokens\": 22, \"total_tokens\": 465, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-11T07:21:29.807811Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "Yes, I can provide concise answers on general topics including science and information technology. Please ask your specific questions.", "full_answer": "Yes, I can provide concise answers on general topics including science and information technology. Please ask your specific questions.", "answer_len": 134, "prompt_tokens": 443, "completion_tokens": 22, "total_tokens": 465, "raw_response": "{\"id\": \"chatcmpl-D7ypHAoyrCjMPZ7WA1zeCH1AmQ8Eo\", \"object\": \"chat.completion\", \"created\": 1770794483, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"Yes, I can provide concise answers on general topics including science and information technology. Please ask your specific questions.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 443, \"completion_tokens\": 22, \"total_tokens\": 465, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-11T07:21:29.866364Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "205e8def-ae56-44b2-83ed-09800447c0c5"}
{"timestamp": "2026-02-11T07:22:12.667152Z", "step": "CHAT_REQUEST_RECEIVED", "message": "Chat /generate request received", "business_client_id": "default", "workspace_id": "main", "user_id": "u123", "query": "you are medical bot why you provide me external topics question and their answers?"}
{"timestamp": "2026-02-11T07:22:12.680365Z", "step": "CHAT_BUSINESS_FOUND", "message": "Business resolved", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55"}
{"timestamp": "2026-02-11T07:22:12.720129Z", "step": "CHAT_WORKSPACE_FOUND", "message": "Workspace resolved", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5"}
{"timestamp": "2026-02-11T07:22:12.771893Z", "step": "CHAT_CONFIG_FOUND", "message": "Workspace config loaded", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "chat_model": "gpt-4.1-mini"}
{"timestamp": "2026-02-11T07:22:12.796480Z", "step": "CHAT_QUERY_RECEIVED", "message": "Query received in system", "business_id": "9732ad9b-720e-4f7e-8436-d1d0302e4e55", "workspace_id": "b67ee4ec-1594-4d1b-832c-fcb235b97cf5", "user_id": "u123", "query": "you are medical bot why you provide me external topics question and their answers?", "query_word_count": 14}
{"timestamp": "2026-02-11T07:22:12.828982Z", "step": "CHAT_EMBEDDING_START", "message": "Creating query embedding", "embedding_model": "sentence-transformers/all-MiniLM-L6-v2", "use_local": true}
{"timestamp": "2026-02-11T07:22:18.246925Z", "step": "CHAT_EMBEDDING_DONE", "message": "Query vector created", "vector_dim": 384, "vector_preview": [-0.034802, 0.014649, 0.036556, -0.001668, 0.001504, -0.012203, 0.049749, 0.202025]}
{"timestamp": "2026-02-11T07:22:18.252562Z", "step": "CHAT_RETRIEVAL_START", "message": "Searching RAG for matching chunks", "top_k": 5, "similarity_threshold": 0.2}
{"timestamp": "2026-02-11T07:22:18.284756Z", "step": "CHAT_RETRIEVAL_DONE", "message": "Matched 0 chunks", "chunk_count": 0, "chunk_ids": [], "chunks_matched": []}
{"timestamp": "2026-02-11T07:22:18.306350Z", "step": "CHAT_PROMPT_BUILT", "message": "Final prompt assembled for ChatGPT API", "system_prompt_len": 53, "context_len": 0, "user_content_len": 103, "prompt_preview": "[SYSTEM]\nYou are a medical assistant. Provide concise answers.\n[USER]\nCONTEXT:\n\n\nQUESTION:\nyou are medical bot why you provide me external topics question and their answers?"}
{"timestamp": "2026-02-11T07:22:18.332112Z", "step": "CHAT_OPENAI_CALL", "message": "Calling ChatGPT API (model=gpt-4.1-mini)", "model": "gpt-4.1-mini", "temperature": 0.2, "max_tokens": 600, "message_count": 2, "request_content_len": 156}
{"timestamp": "2026-02-11T07:22:18.359411Z", "step": "CHAT_OPENAI_KEY_CHECK", "message": "OpenAI API key from DB/env (masked)", "key_set": true, "key_length": 164, "masked_key": "sk-proj...YFkA"}
{"timestamp": "2026-02-11T07:22:18.405887Z", "step": "CHAT_OPENAI_SEND", "message": "Sending request to OpenAI", "model": "gpt-4.1-mini", "base_url": "https://api.openai.com/v1", "request_body": "{\"model\": \"gpt-4.1-mini\", \"message_count\": 2, \"temperature\": 0.2, \"max_tokens\": 600, \"message_content_lens\": [53, 103]}"}
{"timestamp": "2026-02-11T07:22:19.675219Z", "step": "CHAT_OPENAI_API_RESPONSE", "message": "OpenAI API raw response (before raise_for_status)", "status_code": 200, "response_body": "{\n  \"id\": \"chatcmpl-D7yq55QMTseRI8gcWHMoDMsSmBy8T\",\n  \"object\": \"chat.completion\",\n  \"created\": 1770794533,\n  \"model\": \"gpt-4.1-mini-2025-04-14\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I provide answers based on medical knowledge to help with your health-related questions. If you received unrelated topics, it may have been a misunderstanding. Please ask your specific medical question, and I will assist you accordingly.\",\n        \"refusal\": null,\n        \"annotations\": []\n      },\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\"\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 41,\n    \"completion_tokens\": 42,\n    \"total_tokens\": 83,\n    \"prompt_tokens_details\": {\n      \"cached_tokens\": 0,\n      \"audio_tokens\": 0\n    },\n    \"completion_tokens_details\": {\n      \"reasoning_tokens\": 0,\n      \"audio_tokens\": 0,\n      \"accepted_prediction_tokens\": 0,\n      \"rejected_prediction_tokens\": 0\n    }\n  },\n  \"service_tier\": \"default\",\n  \"system_fingerprint\": \"fp_75546bd1a7\"\n}\n"}
{"timestamp": "2026-02-11T07:22:19.688253Z", "step": "CHAT_OPENAI_RAW_RESPONSE", "message": "OpenAI API raw response body (success)", "raw_response": "{\"id\": \"chatcmpl-D7yq55QMTseRI8gcWHMoDMsSmBy8T\", \"object\": \"chat.completion\", \"created\": 1770794533, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"I provide answers based on medical knowledge to help with your health-related questions. If you received unrelated topics, it may have been a misunderstanding. Please ask your specific medical question, and I will assist you accordingly.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 41, \"completion_tokens\": 42, \"total_tokens\": 83, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-11T07:22:19.711863Z", "step": "CHAT_OPENAI_RESPONSE", "message": "GPT response received", "answer_preview": "I provide answers based on medical knowledge to help with your health-related questions. If you received unrelated topics, it may have been a misunderstanding. Please ask your specific medical question, and I will assist you accordingly.", "full_answer": "I provide answers based on medical knowledge to help with your health-related questions. If you received unrelated topics, it may have been a misunderstanding. Please ask your specific medical question, and I will assist you accordingly.", "answer_len": 237, "prompt_tokens": 41, "completion_tokens": 42, "total_tokens": 83, "raw_response": "{\"id\": \"chatcmpl-D7yq55QMTseRI8gcWHMoDMsSmBy8T\", \"object\": \"chat.completion\", \"created\": 1770794533, \"model\": \"gpt-4.1-mini-2025-04-14\", \"choices\": [{\"index\": 0, \"message\": {\"role\": \"assistant\", \"content\": \"I provide answers based on medical knowledge to help with your health-related questions. If you received unrelated topics, it may have been a misunderstanding. Please ask your specific medical question, and I will assist you accordingly.\", \"refusal\": null, \"annotations\": []}, \"logprobs\": null, \"finish_reason\": \"stop\"}], \"usage\": {\"prompt_tokens\": 41, \"completion_tokens\": 42, \"total_tokens\": 83, \"prompt_tokens_details\": {\"cached_tokens\": 0, \"audio_tokens\": 0}, \"completion_tokens_details\": {\"reasoning_tokens\": 0, \"audio_tokens\": 0, \"accepted_prediction_tokens\": 0, \"rejected_prediction_tokens\": 0}}, \"service_tier\": \"default\", \"system_fingerprint\": \"fp_75546bd1a7\"}"}
{"timestamp": "2026-02-11T07:22:19.754796Z", "step": "CHAT_SAVED", "message": "Chat request and response saved to DB", "request_id": "e60c402d-11cb-45d5-ad12-6fa222474af4"}
